<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>


	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="verify-v1" content="J75JQ+WGFRjBEnhNT4hhYxgVTQmRHjd0v3JF+izUFvA=">
	<title>Heroku | Config vars</title>
	<link type="text/css" rel="stylesheet" href="Config%20vars_files/docs.css" media="screen">
	<link type="text/css" rel="stylesheet" href="Config%20vars_files/shCore.css">
	<link type="text/css" rel="stylesheet" href="Config%20vars_files/shThemeHeroku.css">
	<script type="text/javascript" src="Config%20vars_files/jquery-1.js"></script>
	<script type="text/javascript" src="Config%20vars_files/shCore.js"></script>
	<script type="text/javascript" src="Config%20vars_files/shBrushRuby.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			SyntaxHighlighter.config.tagName = 'code'
			SyntaxHighlighter.defaults['tag'] = false;
			SyntaxHighlighter.defaults['gutter'] = false;
			SyntaxHighlighter.defaults['toolbar'] = false;
			SyntaxHighlighter.all();
		});
	</script>
</head><body>
<div id="bodywrap">

	<style type="text/css">
#header { margin: 0; padding: 0; border: 0; font-weight: inherit; font-style: inherit; font-size: 100%; font-family: arial, helvetica, sans-serif; vertical-align: baseline; margin-bottom: 15px; }

#header { background-color: #29264d; border-bottom-style: solid; border-bottom-width: 3px; border-bottom-color: #494573; overflow: hidden; display: inline-block; }
#header { display: block; }
#header a { color: #c9c3e6; text-decoration: none; font-weight: normal; }
#header a:hover { color: #fff; }
#header #logo { margin: 20px 0 15px 25px; float: left; }
#header #logo a { display: block; text-indent: -9999px; width: 177px; height: 56px; overflow: hidden; background-image: url(http://heroku.com/images/v2/logo.png); background-repeat: no-repeat; }
#header ul { list-style-type: none; overflow: hidden; display: inline-block; float: right; margin-top: 30px; padding: 10px; }
#header ul { display: block; }
#header ul li { float: left; margin-left: 10px; }
#header ul li:first-child { margin-left: 0; }
#header ul li { border-left-style: solid; border-left-width: 2px; border-left-color: #534890; padding-left: 10px; font-size: 16px; }
#header ul li:first-child, #header ul li#account_login { border: none; margin-left: 0; padding-left: 0; }
#header ul li a.active { color: #bff740; }
#header ul li a.active:hover { color: #bff740; }
#header ul.account-links { background-color: #231d40; padding-left: 15px; padding-right: 15px; margin-right: 25px; margin-left: 10px; -moz-border-radius: 7px; -webkit-border-radius: 7px; }
#header ul.account-links a { color: #45a4ff; }
#header ul.account-links a:hover { color: #74d0f4; }
#header ul.account-links a.active { color: #bff740; }
#header ul.account-links a.active:hover { color: #bff740; }

</style>


<div id="header">
	
		<h5 id="logo"><a href="http://heroku.com/">Heroku</a></h5>
	

	<ul class="account-links inline">
		<div id="logged-in-links" style="display: none;">
			<li><a href="http://heroku.com/myapps">My Apps</a></li>
			<li><a href="http://heroku.com/account">My Account</a></li>
			<li><a href="http://heroku.com/logout">Logout</a></li>
		</div>
		<li id="account_login"><a href="http://heroku.com/login">Login</a></li>
	</ul>
	<ul class="info-links inline">
		<!-- <li><a href="http://heroku.com/about">About</a></li> -->
		<li><a href="http://heroku.com/how">How it Works</a></li>
		<li><a href="http://heroku.com/pricing">Pricing</a></li>
		<!-- <li><a href="http://blog.heroku.com/">Blog</a></li> -->
		<li><a href="http://docs.heroku.com/" class="active">Docs</a></li>
		<li><a href="http://support.heroku.com/" id="support_link">Support</a></li>
	</ul>
</div>

<script type="text/javascript">
	if (document.cookie.indexOf('heroku_session=') != -1) {
		document.getElementById('support_link').href = 'http://heroku.com/helpdesk/login';
		document.getElementById('logged-in-links').style.display = 'block';
		document.getElementById('account_login').style.display = 'none';
	}
</script>



	<div id="docsnav">
		<form action="/search" id="cse-search-box">
			<div id="search">
				<input name="cx" value="011016403564345195107:s5fypn6csxi" type="hidden">
				<input name="cof" value="FORID:10;NB:1" type="hidden">
				<input name="ie" value="UTF-8" type="hidden">
				<input style="border: 1px solid rgb(126, 157, 185); padding: 2px; background: rgb(255, 255, 255) url(http://www.google.com/coop/intl/en/images/google_custom_search_watermark.gif) no-repeat scroll left center; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous;" name="q" size="31" type="text">
			</div>
		<input value="14d5058e-f79f-0935-acbc-c29344a71d2a" name="vid" type="hidden"></form>

		<ul>
			
				<li>
				<h3>Getting Started</h3>
				<ul>
					
						
							<li><a href="http://docs.heroku.com/heroku">What is Heroku?</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/quickstart">Quickstart Guide</a></li>
						
					
				</ul>
				</li>
			
				<li>
				<h3>Application Management</h3>
				<ul>
					
						
							<li><a href="http://docs.heroku.com/heroku-command">Installing the Heroku command-line tool</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/creating-apps">Creating apps</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/renaming-apps">Renaming apps</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/git">Deploying with Git</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/sharing">Collaborating with others</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/gems">Managing Gems</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/taps">Database import / export</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/console">Using the console</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/rake">Running rake tasks</a></li>
						
					
						
							<li class="current"><a>Config vars</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/backups">Backups</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/addons">Managing Addons</a></li>
						
					
				</ul>
				</li>
			
				<li>
				<h3>Platform Features</h3>
				<ul>
					
						
							<li><a href="http://docs.heroku.com/technologies">System Infrastructure</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/dynos">Dynos</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/database">SQL Database</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/http-caching">HTTP cache</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/rack">Rack apps</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/custom-domains">Custom domains</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/ssl">SSL</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/cron">Cron</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/background-jobs">Background jobs</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/s3">Storing uploads in S3</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/smtp">Outbound email</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/full-text-indexing">Full text search indexing</a></li>
						
					
				</ul>
				</li>
			
				<li>
				<h3>Troubleshooting</h3>
				<ul>
					
						
							<li><a href="http://docs.heroku.com/constraints">Application constraints</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/logs-exceptions">Logs and exceptions</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/errors">Error pages</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/performance">Performance</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/support">Getting support</a></li>
						
					
				</ul>
				</li>
			
		</ul>
	</div>

	<div id="content">
		<div class="topic_content">
			<h1>Config vars</h1>



<p>A given codebase may have numerous deployments: a production site, a
staging site, and one could even count each of the developers' local
checkouts as deployments running on their individual workstations. An
open source app may have hundreds or thousands of deployments.</p>

<p>Although all running the same code, each of these deploys have
environment-specific configurations. One example would be credentials
for an external service, such as Amazon S3. Developers may share one S3
account, while the staging site and production sites each have their
own keys.</p>

<p>The traditional approach for handling such config vars is to put them under source. Often in a YAML file, such as <code>config/s3.yml</code>.
This is a slightly error-prone process, and is especially complicated
for an open source app, which probably has to maintain a separate (and
private) branch with the app-specific configurations.</p>

<p>A better solution is to use environment variables, and keep the keys
out of the code. On a traditional host or working locally you can set
environment vars in your <code>bashrc</code>.  On Heroku, you use config vars.</p>

<a name="quick-example"></a>


	<ul id="toc">
		
			<li><a href="#quick-example">Quick example</a></li>
		
			<li><a href="#local-setup">Local setup</a></li>
		
			<li><a href="#config-commands">Config commands</a></li>
		
			<li><a href="#rackenv-railsenv-merbenv">RACK_ENV, RAILS_ENV, MERB_ENV</a></li>
		
	</ul>


<h2>Quick example</h2>

<p>Add some config vars for your S3 account keys:</p>

<pre><code>$ cd myapp
$ heroku config:add S3_KEY=8N029N81 S3_SECRET=9s83109d3+583493190
Adding config vars:
  S3_KEY    =&gt; 8N029N81
  S3_SECRET =&gt; 9s83109d3+583493190
Restarting app...done.
</code></pre>

<p>Set up your code to read the vars at runtime in <code>config/initializers/s3.rb</code>:</p>

<pre><div class="syntaxhighlighter nogutter " id="highlighter_281013"><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px ! important;"><code class="constants">AWS</code><code class="plain">::</code><code class="constants">S3</code><code class="plain">::Base.establish_connection!(</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 14px ! important;"><code class="color2">:access_key_id</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="plain">=&gt; </code><code class="constants">ENV</code><code class="plain">[</code><code class="string">'S3_KEY'</code><code class="plain">],</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 14px ! important;"><code class="color2">:secret_access_key</code> <code class="plain">=&gt; </code><code class="constants">ENV</code><code class="plain">[</code><code class="string">'S3_SECRET'</code><code class="plain">],</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px ! important;"><code class="plain">)</code></span></span></div></div></div></pre>

<p>Now, upon deploying to Heroku, the app will use the keys set in the config.</p>

<table class="note">
<tbody><tr><td class="icon"></td><td class="content">Environment
variables set with heroku config are persistent. They will remain in
place across deploys and app restarts, so unless you need to change
values you only need to set them once. </td>
</tr></tbody></table>


<a name="local-setup"></a><h2>Local setup</h2>

<p>In the example shown above, the app would run with the AWS keys set to <code>nil</code> on a developer workstation or any host other than Heroku.  You can set these values in the <code>~/.bashrc</code> for the user:</p>

<pre><code>export S3_KEY=mykey
export S3_SECRET=mysecret
</code></pre>

<p>Or, specify them when running the local server (or any other command, like a rake task) by prepending the shell command:</p>

<pre><code>$ S3_KEY=mykey S3_SECRET=mysecret script/server
</code></pre>

<p>Another option is to have default values when running locally:</p>

<pre><div class="syntaxhighlighter nogutter " id="highlighter_908152"><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px ! important;"><code class="constants">AWS</code><code class="plain">::</code><code class="constants">S3</code><code class="plain">::Base.establish_connection!(</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 14px ! important;"><code class="color2">:access_key_id</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="plain">=&gt; </code><code class="constants">ENV</code><code class="plain">[</code><code class="string">'S3_KEY'</code><code class="plain">] || </code><code class="string">'thedefaultkey'</code><code class="plain">,</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 14px ! important;"><code class="color2">:secret_access_key</code> <code class="plain">=&gt; </code><code class="constants">ENV</code><code class="plain">[</code><code class="string">'S3_SECRET'</code><code class="plain">] || </code><code class="string">'thedefaultsecret'</code><code class="plain">,</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px ! important;"><code class="plain">)</code></span></span></div></div></div></pre>

<p>(This pattern is identical to that used for the <a href="http://docs.heroku.com/rack#using-datamapper-or-sequel">DATABASE_URL</a> defaults.)</p>

<p>You might fill in the S3 account allocated for developers to fool
around with as the default, and override this with the production keys
on the production site.</p>

<a name="config-commands"></a><h2>Config commands</h2>

<p>Use <code>heroku config</code>, <code>config:add</code>, <code>config:remove</code>, and <code>config:clear</code> to manage your config vars.</p>

<pre><code>$ heroku config:add GITHUB_USERNAME=joesmith
Adding config vars:
  GITHUB_USERNAME =&gt; joesmith
Restarting app...done.

$ heroku config
GITHUB_USERNAME =&gt; joesmith
RACK_ENV =&gt; production

$ heroku config:clear
Clearing all config vars and restarting app...done.
</code></pre>

<a name="rackenv-railsenv-merbenv"></a><h2>RACK_ENV, RAILS_ENV, MERB_ENV</h2>

<p>The RACK_ENV value is set to production by default. You should
rarely, if ever, want to change this. But you can set it the same as
any other config value if you so desire:</p>

<pre><code>$ heroku config:add RACK_ENV=staging
Adding config vars:
  RACK_ENV =&gt; staging
Restarting app...done.
</code></pre>

<p>Note: RAILS_ENV and MERB_ENV will automatically mirror whatever is in RACK_ENV.  Don’t set RAILS_ENV or MERB_ENV directly.</p>

<p>Note: It is not recommended that you ever set your
RACK_ENV=development, as that will enable reloading and slow down your
app’s dyno significantly.</p>



	<div id="next_section">Next: <a href="http://docs.heroku.com/backups">Backups →</a></div>


<a href="http://docs.heroku.com/backups">		</a></div>
<a href="http://docs.heroku.com/backups">	</a></div>
</div>

<!-- google site search -->
<script type="text/javascript" src="Config%20vars_files/jsapi"></script>
<script type="text/javascript">google.load("elements", "1", {packages: "transliteration"});</script><script src="Config%20vars_files/a" type="text/javascript"></script><a href="http://docs.heroku.com/backups"><link href="Config%20vars_files/transliteration.css" type="text/css" rel="stylesheet"><script src="Config%20vars_files/transliteration.js" type="text/javascript"></script>
<script type="text/javascript" src="Config%20vars_files/t13n.htm"></script>
<script type="text/javascript" src="Config%20vars_files/brand.htm"></script>


<!-- loopfuse -->
<script src="Config%20vars_files/listen.js" type="text/javascript"></script>
<script type="text/javascript">
_lf_cid = "LF_024e931f";
_lf_remora();
</script>

<!-- google analytics -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="Config%20vars_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
try{
var pageTracker = _gat._getTracker("UA-2989055-1");
pageTracker._setDomainName(".heroku.com");
pageTracker._trackPageview();
} catch(err) {}
</script>


</a></body></html>