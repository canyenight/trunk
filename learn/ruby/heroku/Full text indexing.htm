<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>


	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="verify-v1" content="J75JQ+WGFRjBEnhNT4hhYxgVTQmRHjd0v3JF+izUFvA=">
	<title>Heroku | Full text indexing</title>
	<link type="text/css" rel="stylesheet" href="Full%20text%20indexing_files/docs.css" media="screen">
	<link type="text/css" rel="stylesheet" href="Full%20text%20indexing_files/shCore.css">
	<link type="text/css" rel="stylesheet" href="Full%20text%20indexing_files/shThemeHeroku.css">
	<script type="text/javascript" src="Full%20text%20indexing_files/jquery-1.js"></script>
	<script type="text/javascript" src="Full%20text%20indexing_files/shCore.js"></script>
	<script type="text/javascript" src="Full%20text%20indexing_files/shBrushRuby.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			SyntaxHighlighter.config.tagName = 'code'
			SyntaxHighlighter.defaults['tag'] = false;
			SyntaxHighlighter.defaults['gutter'] = false;
			SyntaxHighlighter.defaults['toolbar'] = false;
			SyntaxHighlighter.all();
		});
	</script>
</head><body>
<div id="bodywrap">

	<style type="text/css">
#header { margin: 0; padding: 0; border: 0; font-weight: inherit; font-style: inherit; font-size: 100%; font-family: arial, helvetica, sans-serif; vertical-align: baseline; margin-bottom: 15px; }

#header { background-color: #29264d; border-bottom-style: solid; border-bottom-width: 3px; border-bottom-color: #494573; overflow: hidden; display: inline-block; }
#header { display: block; }
#header a { color: #c9c3e6; text-decoration: none; font-weight: normal; }
#header a:hover { color: #fff; }
#header #logo { margin: 20px 0 15px 25px; float: left; }
#header #logo a { display: block; text-indent: -9999px; width: 177px; height: 56px; overflow: hidden; background-image: url(http://heroku.com/images/v2/logo.png); background-repeat: no-repeat; }
#header ul { list-style-type: none; overflow: hidden; display: inline-block; float: right; margin-top: 30px; padding: 10px; }
#header ul { display: block; }
#header ul li { float: left; margin-left: 10px; }
#header ul li:first-child { margin-left: 0; }
#header ul li { border-left-style: solid; border-left-width: 2px; border-left-color: #534890; padding-left: 10px; font-size: 16px; }
#header ul li:first-child, #header ul li#account_login { border: none; margin-left: 0; padding-left: 0; }
#header ul li a.active { color: #bff740; }
#header ul li a.active:hover { color: #bff740; }
#header ul.account-links { background-color: #231d40; padding-left: 15px; padding-right: 15px; margin-right: 25px; margin-left: 10px; -moz-border-radius: 7px; -webkit-border-radius: 7px; }
#header ul.account-links a { color: #45a4ff; }
#header ul.account-links a:hover { color: #74d0f4; }
#header ul.account-links a.active { color: #bff740; }
#header ul.account-links a.active:hover { color: #bff740; }

</style>


<div id="header">
	
		<h5 id="logo"><a href="http://heroku.com/">Heroku</a></h5>
	

	<ul class="account-links inline">
		<div id="logged-in-links" style="display: none;">
			<li><a href="http://heroku.com/myapps">My Apps</a></li>
			<li><a href="http://heroku.com/account">My Account</a></li>
			<li><a href="http://heroku.com/logout">Logout</a></li>
		</div>
		<li id="account_login"><a href="http://heroku.com/login">Login</a></li>
	</ul>
	<ul class="info-links inline">
		<!-- <li><a href="http://heroku.com/about">About</a></li> -->
		<li><a href="http://heroku.com/how">How it Works</a></li>
		<li><a href="http://heroku.com/pricing">Pricing</a></li>
		<!-- <li><a href="http://blog.heroku.com/">Blog</a></li> -->
		<li><a href="http://docs.heroku.com/" class="active">Docs</a></li>
		<li><a href="http://support.heroku.com/" id="support_link">Support</a></li>
	</ul>
</div>

<script type="text/javascript">
	if (document.cookie.indexOf('heroku_session=') != -1) {
		document.getElementById('support_link').href = 'http://heroku.com/helpdesk/login';
		document.getElementById('logged-in-links').style.display = 'block';
		document.getElementById('account_login').style.display = 'none';
	}
</script>



	<div id="docsnav">
		<form action="/search" id="cse-search-box">
			<div id="search">
				<input name="cx" value="011016403564345195107:s5fypn6csxi" type="hidden">
				<input name="cof" value="FORID:10;NB:1" type="hidden">
				<input name="ie" value="UTF-8" type="hidden">
				<input style="border: 1px solid rgb(126, 157, 185); padding: 2px; background: rgb(255, 255, 255) url(http://www.google.com/coop/intl/en/images/google_custom_search_watermark.gif) no-repeat scroll left center; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous;" name="q" size="31" type="text">
			</div>
		<input value="14d5058e-f79f-0935-acbc-c29344a71d2a" name="vid" type="hidden"></form>

		<ul>
			
				<li>
				<h3>Getting Started</h3>
				<ul>
					
						
							<li><a href="http://docs.heroku.com/heroku">What is Heroku?</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/quickstart">Quickstart Guide</a></li>
						
					
				</ul>
				</li>
			
				<li>
				<h3>Application Management</h3>
				<ul>
					
						
							<li><a href="http://docs.heroku.com/heroku-command">Installing the Heroku command-line tool</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/creating-apps">Creating apps</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/renaming-apps">Renaming apps</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/git">Deploying with Git</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/sharing">Collaborating with others</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/gems">Managing Gems</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/taps">Database import / export</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/console">Using the console</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/rake">Running rake tasks</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/config-vars">Config vars</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/backups">Backups</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/addons">Managing Addons</a></li>
						
					
				</ul>
				</li>
			
				<li>
				<h3>Platform Features</h3>
				<ul>
					
						
							<li><a href="http://docs.heroku.com/technologies">System Infrastructure</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/dynos">Dynos</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/database">SQL Database</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/http-caching">HTTP cache</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/rack">Rack apps</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/custom-domains">Custom domains</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/ssl">SSL</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/cron">Cron</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/background-jobs">Background jobs</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/s3">Storing uploads in S3</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/smtp">Outbound email</a></li>
						
					
						
							<li class="current"><a>Full text search indexing</a></li>
						
					
				</ul>
				</li>
			
				<li>
				<h3>Troubleshooting</h3>
				<ul>
					
						
							<li><a href="http://docs.heroku.com/constraints">Application constraints</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/logs-exceptions">Logs and exceptions</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/errors">Error pages</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/performance">Performance</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/support">Getting support</a></li>
						
					
				</ul>
				</li>
			
		</ul>
	</div>

	<div id="content">
		<div class="topic_content">
			<h1>Full text indexing</h1>



<p>For apps with small datasets to be indexed, we recommend
acts_as_ferret, which is quick to setup and has no external
dependencies, but is limited in how far it can scale. For apps with
large datasets, we recommend Solr, which will require setup of an
external server.</p>

<a name="ferret"></a>


	<ul id="toc">
		
			<li><a href="#ferret">Ferret</a></li>
		
			<li><a href="#solr">Solr</a></li>
		
	</ul>


<h2>Ferret</h2>

<p>Heroku has the Ferret and acts_as_ferret gems installed by default.
By default, acts_as_ferret stores its indexes in a location that is not
writeable for Heroku apps, so you’ll need to add this bit of
configuration to your environment.rb:</p>

<pre><div class="syntaxhighlighter nogutter " id="highlighter_851794"><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px ! important;"><code class="plain">require </code><code class="string">'acts_as_ferret'</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px ! important;"><code class="plain">ActsAsFerret.index_dir = </code><code class="string">"#{RAILS_ROOT}/tmp/index"</code></span></span></div></div></div></pre>

<p>This will require rebuilding the indexes every time a new app server
is launched, so it’s not well-suited for large datasets. But it’s a
good choice for getting off the ground quickly.</p>

<p>Further reading: <a href="http://www.railsenvy.com/2007/2/19/acts-as-ferret-tutorial">http://www.railsenvy.com/2007/2/19/acts-as-ferret-tutorial</a></p>

<a name="solr"></a><h2>Solr</h2>

<p>For large datasets, you can run a Solr server on your own EC2
instance (ideal for minimizing latency), or on any internet-connected
server. Steps to set up Solr:</p>

<ul>
<li>Install the Java runtime environment.  On Debian or Ubuntu this can be done with: apt-get install sun-java6-jre</li>
<li><code>git clone git://github.com/mattmatt/acts_as_solr.git</code></li>
<li><code>cd acts_as_solr/solr &amp;&amp; java -jar start.jar</code></li>
</ul>


<p>The server will now be running on port 8983. Test it with a web
client, such as: curl localhost:8983, which should produce a 404.</p>

<p>Then to set up a Rails app to access it:</p>

<ul>
<li><code>script/plugin install git://github.com/mattmatt/acts_as_solr.git</code></li>
<li>Add acts_as_solr to the model. Specify which fields you want to
index – otherwise it will try to index everything, which may cause
problems with date fields. For example: <code>acts_as_solr :fields =&gt; [ :title, :body ]</code></li>
<li>Edit <code>config/solr.yml</code> and set production to use the IP of your Solr server and port 8983.</li>
<li>Deploy your app to Heroku with git push.</li>
<li>Run <code>heroku rake solr:reindex</code> to generate the index for any existing records in your database.</li>
<li>Try it out with something like: <code>heroku console "Post.find_by_solr('some text')"</code></li>
</ul>


<p>Further reading: <a href="http://www.quarkruby.com/2007/8/12/acts_as_solr-for-search-and-faceting">http://www.quarkruby.com/2007/8/12/acts_as_solr-for-search-and-faceting</a></p>




		</div>
	</div>
</div>

<!-- google site search -->
<script type="text/javascript" src="Full%20text%20indexing_files/jsapi"></script>
<script type="text/javascript">google.load("elements", "1", {packages: "transliteration"});</script><script src="Full%20text%20indexing_files/a" type="text/javascript"></script><link href="Full%20text%20indexing_files/transliteration.css" type="text/css" rel="stylesheet"><script src="Full%20text%20indexing_files/transliteration.js" type="text/javascript"></script>
<script type="text/javascript" src="Full%20text%20indexing_files/t13n.htm"></script>
<script type="text/javascript" src="Full%20text%20indexing_files/brand.htm"></script>


<!-- loopfuse -->
<script src="Full%20text%20indexing_files/listen.js" type="text/javascript"></script>
<script type="text/javascript">
_lf_cid = "LF_024e931f";
_lf_remora();
</script>

<!-- google analytics -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="Full%20text%20indexing_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
try{
var pageTracker = _gat._getTracker("UA-2989055-1");
pageTracker._setDomainName(".heroku.com");
pageTracker._trackPageview();
} catch(err) {}
</script>


</body></html>