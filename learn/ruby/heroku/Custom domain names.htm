<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>


	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="verify-v1" content="J75JQ+WGFRjBEnhNT4hhYxgVTQmRHjd0v3JF+izUFvA=">
	<title>Heroku | Custom domain names</title>
	<link type="text/css" rel="stylesheet" href="Custom%20domain%20names_files/docs.css" media="screen">
	<link type="text/css" rel="stylesheet" href="Custom%20domain%20names_files/shCore.css">
	<link type="text/css" rel="stylesheet" href="Custom%20domain%20names_files/shThemeHeroku.css">
	<script type="text/javascript" src="Custom%20domain%20names_files/jquery-1.js"></script>
	<script type="text/javascript" src="Custom%20domain%20names_files/shCore.js"></script>
	<script type="text/javascript" src="Custom%20domain%20names_files/shBrushRuby.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			SyntaxHighlighter.config.tagName = 'code'
			SyntaxHighlighter.defaults['tag'] = false;
			SyntaxHighlighter.defaults['gutter'] = false;
			SyntaxHighlighter.defaults['toolbar'] = false;
			SyntaxHighlighter.all();
		});
	</script>
</head><body>
<div id="bodywrap">

	<style type="text/css">
#header { margin: 0; padding: 0; border: 0; font-weight: inherit; font-style: inherit; font-size: 100%; font-family: arial, helvetica, sans-serif; vertical-align: baseline; margin-bottom: 15px; }

#header { background-color: #29264d; border-bottom-style: solid; border-bottom-width: 3px; border-bottom-color: #494573; overflow: hidden; display: inline-block; }
#header { display: block; }
#header a { color: #c9c3e6; text-decoration: none; font-weight: normal; }
#header a:hover { color: #fff; }
#header #logo { margin: 20px 0 15px 25px; float: left; }
#header #logo a { display: block; text-indent: -9999px; width: 177px; height: 56px; overflow: hidden; background-image: url(http://heroku.com/images/v2/logo.png); background-repeat: no-repeat; }
#header ul { list-style-type: none; overflow: hidden; display: inline-block; float: right; margin-top: 30px; padding: 10px; }
#header ul { display: block; }
#header ul li { float: left; margin-left: 10px; }
#header ul li:first-child { margin-left: 0; }
#header ul li { border-left-style: solid; border-left-width: 2px; border-left-color: #534890; padding-left: 10px; font-size: 16px; }
#header ul li:first-child, #header ul li#account_login { border: none; margin-left: 0; padding-left: 0; }
#header ul li a.active { color: #bff740; }
#header ul li a.active:hover { color: #bff740; }
#header ul.account-links { background-color: #231d40; padding-left: 15px; padding-right: 15px; margin-right: 25px; margin-left: 10px; -moz-border-radius: 7px; -webkit-border-radius: 7px; }
#header ul.account-links a { color: #45a4ff; }
#header ul.account-links a:hover { color: #74d0f4; }
#header ul.account-links a.active { color: #bff740; }
#header ul.account-links a.active:hover { color: #bff740; }

</style>


<div id="header">
	
		<h5 id="logo"><a href="http://heroku.com/">Heroku</a></h5>
	

	<ul class="account-links inline">
		<div id="logged-in-links" style="display: none;">
			<li><a href="http://heroku.com/myapps">My Apps</a></li>
			<li><a href="http://heroku.com/account">My Account</a></li>
			<li><a href="http://heroku.com/logout">Logout</a></li>
		</div>
		<li id="account_login"><a href="http://heroku.com/login">Login</a></li>
	</ul>
	<ul class="info-links inline">
		<!-- <li><a href="http://heroku.com/about">About</a></li> -->
		<li><a href="http://heroku.com/how">How it Works</a></li>
		<li><a href="http://heroku.com/pricing">Pricing</a></li>
		<!-- <li><a href="http://blog.heroku.com/">Blog</a></li> -->
		<li><a href="http://docs.heroku.com/" class="active">Docs</a></li>
		<li><a href="http://support.heroku.com/" id="support_link">Support</a></li>
	</ul>
</div>

<script type="text/javascript">
	if (document.cookie.indexOf('heroku_session=') != -1) {
		document.getElementById('support_link').href = 'http://heroku.com/helpdesk/login';
		document.getElementById('logged-in-links').style.display = 'block';
		document.getElementById('account_login').style.display = 'none';
	}
</script>



	<div id="docsnav">
		<form action="/search" id="cse-search-box">
			<div id="search">
				<input name="cx" value="011016403564345195107:s5fypn6csxi" type="hidden">
				<input name="cof" value="FORID:10;NB:1" type="hidden">
				<input name="ie" value="UTF-8" type="hidden">
				<input style="border: 1px solid rgb(126, 157, 185); padding: 2px; background: rgb(255, 255, 255) url(http://www.google.com/coop/intl/en/images/google_custom_search_watermark.gif) no-repeat scroll left center; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous;" name="q" size="31" type="text">
			</div>
		<input value="14d5058e-f79f-0935-acbc-c29344a71d2a" name="vid" type="hidden"></form>

		<ul>
			
				<li>
				<h3>Getting Started</h3>
				<ul>
					
						
							<li><a href="http://docs.heroku.com/heroku">What is Heroku?</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/quickstart">Quickstart Guide</a></li>
						
					
				</ul>
				</li>
			
				<li>
				<h3>Application Management</h3>
				<ul>
					
						
							<li><a href="http://docs.heroku.com/heroku-command">Installing the Heroku command-line tool</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/creating-apps">Creating apps</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/renaming-apps">Renaming apps</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/git">Deploying with Git</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/sharing">Collaborating with others</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/gems">Managing Gems</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/taps">Database import / export</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/console">Using the console</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/rake">Running rake tasks</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/config-vars">Config vars</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/backups">Backups</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/addons">Managing Addons</a></li>
						
					
				</ul>
				</li>
			
				<li>
				<h3>Platform Features</h3>
				<ul>
					
						
							<li><a href="http://docs.heroku.com/technologies">System Infrastructure</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/dynos">Dynos</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/database">SQL Database</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/http-caching">HTTP cache</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/rack">Rack apps</a></li>
						
					
						
							<li class="current"><a>Custom domains</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/ssl">SSL</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/cron">Cron</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/background-jobs">Background jobs</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/s3">Storing uploads in S3</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/smtp">Outbound email</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/full-text-indexing">Full text search indexing</a></li>
						
					
				</ul>
				</li>
			
				<li>
				<h3>Troubleshooting</h3>
				<ul>
					
						
							<li><a href="http://docs.heroku.com/constraints">Application constraints</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/logs-exceptions">Logs and exceptions</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/errors">Error pages</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/performance">Performance</a></li>
						
					
						
							<li><a href="http://docs.heroku.com/support">Getting support</a></li>
						
					
				</ul>
				</li>
			
		</ul>
	</div>

	<div id="content">
		<div class="topic_content">
			<h1>Custom domain names</h1>



<p>All Heroku apps are accessible via their heroku.com subdomain:
<code>appname.heroku.com</code>. Enabling the custom domains <a href="http://docs.heroku.com/addons">add-on</a> allows you
to assign additional custom and wildcard domain names. This document describes
how to configure both CNAME and A (root-level domains only) records for custom
domains.</p>

<p>Please note that Heroku does not provide DNS services, you must have an existing
DNS provider before continuing.</p>

<a name="cname-setup"></a>


	<ul id="toc">
		
			<li><a href="#cname-setup">CNAME setup</a></li>
		
			<li><a href="#root-domains-and-custom-mail-servers">Root domains and custom mail servers</a></li>
		
			<li><a href="#heroku-setup">Heroku setup</a></li>
		
			<li><a href="#wildcard-domains">Wildcard domains</a></li>
		
	</ul>


<h2>CNAME setup</h2>

<p>Set up your domain with your registrar, then select the subdomain that you wish
to point at your Heroku app. This could be something like <code>myapp.mycompany.com</code>,
or the standard <code>www.mydomain.com</code>, or it could be the root-level domain,
<code>mydomain.com</code>.</p>

<p>Configure your DNS provider to make your chosen custom domain name be an alias
which points to <code>proxy.heroku.com</code>. In DNS terms this is known as a CNAME.</p>

<p>Check that your DNS is configured correctly with the <code>host</code> command:</p>

<pre><code>$ host www.example.com
www.example.com is an alias for proxy.heroku.com.
proxy.heroku.com has address 75.101.163.44
proxy.heroku.com has address 75.101.145.87
</code></pre>

<p>Output of the host command varies by Unix flavor, but it should indicate that
your domain name is either an alias or CNAME of <code>proxy.heroku.com</code>.</p>

<p>See Oren Teich’s <a href="http://onticoren.com/2009/06/29/go-daddy-dns-heroku/">Setting up DNS screencast</a>
for a walkthrough on GoDaddy.</p>

<a name="root-domains-and-custom-mail-servers"></a><h2>Root domains and custom mail servers</h2>

<table class="note">
<tbody><tr><td class="icon"></td><td class="content">Due to Heroku's cloud architecture, the public IP addresses may need to be
changed from time to time. When using the A record configuraiton, be aware that
we may request that you change your settings at some point in the future.  We
will provide advance notice, but if you do not update your addresses, your site
may stop working.  For this reason, we <strong>strongly</strong> encourage
the CNAME option when possible.</td>
</tr></tbody></table>


<p>Root domains with custom mail servers (MX records) must use A instead of CNAME
records. Only your root domain (<code>mydomain.com</code>) may use A records. Non root
domains (<code>www.mydomain.com</code>) must use the CNAME setup described above.</p>

<p>To setup your root domain, add separate A records for each of the following
addresses using your DNS management tool:</p>

<pre><code>75.101.163.44
75.101.145.87
</code></pre>

<p>Check that your DNS is configured correctly with the “host” command:</p>

<pre><code>$ host example.com
example.com has address 75.101.163.44
example.com has address 75.101.145.87
</code></pre>

<a name="heroku-setup"></a><h2>Heroku setup</h2>

<p>Once DNS is configured, enable the custom domains <a href="http://docs.heroku.com/addons">add-on</a> for the app:</p>

<pre><code>$ heroku addons:add custom_domains
Adding wildcard_domains to myapp...done.
</code></pre>

<p>Then inform Heroku of the domain you are using:</p>

<pre><code>$ heroku domains:add www.example.com
Added www.example.com as a custom domain name to myapp.heroku.com
</code></pre>

<p>You can add any number of domains to a single app by repeating the add command
with different values.</p>

<p>Remove domains with:</p>

<pre><code>$ heroku domains:remove myapp.mydomain.com
Removed www.example.com as a custom domain name to myapp.heroku.com
</code></pre>

<p>You can also clear all the domains at once (often the easiest even if you only
have one domain):</p>

<pre><code>$ heroku domains:clear
Removed all domain names for myapp.heroku.com
</code></pre>

<table class="note">
<tbody><tr><td class="icon"></td><td class="content">If you have multiple domains, or your app has users that access it via its
Heroku subdomain but you later switched to your own custom domain, you will
probably want to get all users onto the same domain with a redirect in a before
filter.  Something like this will do the job:</td>
</tr></tbody></table>


<pre><div class="syntaxhighlighter nogutter " id="highlighter_271205"><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px ! important;"><code class="keyword">class</code> <code class="plain">ApplicationController</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 14px ! important;"><code class="plain">before_filter </code><code class="color2">:ensure_domain</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px ! important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 14px ! important;"><code class="plain">TheDomain = </code><code class="string">'myapp.mydomain.com'</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><span class="block" style="margin-left: 0px ! important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 14px ! important;"><code class="keyword">def</code> <code class="plain">ensure_domain</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 28px ! important;"><code class="keyword">if</code> <code class="plain">request.env[</code><code class="string">'HTTP_HOST'</code><code class="plain">] != TheDomain</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 42px ! important;"><code class="plain">redirect_to TheDomain</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 28px ! important;"><code class="keyword">end</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 14px ! important;"><code class="keyword">end</code></span></span></div><div class="line alt1"><code class="number">11.</code><span class="content"><span class="block" style="margin-left: 0px ! important;"><code class="keyword">end</code></span></span></div></div></div></pre>

<a name="wildcard-domains"></a><h2>Wildcard domains</h2>

<p>If you'd like your app to respond to any subdomain under your custom domain name
(as in <code>*.yourdomain.com</code>), you’ll need to use the wildcard domains add-on.
First, select the add-on:</p>

<pre><code>$ heroku addons:add wildcard_domains
Adding wildcard_domains to myapp...done.
$ curl http://arbitrary-subdomain.myapp.heroku.com/
HTTP/1.1 200 OK
</code></pre>

<p>To use with a custom domain, configure your registrar to point
<code>*.yourdomain.com</code> at heroku.com.  If things are set up correctly you should be
able to look up any arbitrary subdomain:</p>

<pre><code>$ host arbitrary-subdomain.yourdomain.com
arbitrary-subdomain.yourdomain.com is an alias for heroku.com.
</code></pre>

<p>Then add the wildcard domain on Heroku:</p>

<pre><code>$ heroku domains:add *.yourdomain.com
Added *.yourdomain.com as a custom domain name to myapp.heroku.com
$ curl http://arbitrary-subdomain.yourdomain.com/
HTTP/1.1 200 OK
</code></pre>



	<div id="next_section">Next: <a href="http://docs.heroku.com/ssl">SSL →</a></div>


<a href="http://docs.heroku.com/ssl">		</a></div>
<a href="http://docs.heroku.com/ssl">	</a></div>
</div>

<!-- google site search -->
<script type="text/javascript" src="Custom%20domain%20names_files/jsapi"></script>
<script type="text/javascript">google.load("elements", "1", {packages: "transliteration"});</script><script src="Custom%20domain%20names_files/a" type="text/javascript"></script><a href="http://docs.heroku.com/ssl"><link href="Custom%20domain%20names_files/transliteration.css" type="text/css" rel="stylesheet"><script src="Custom%20domain%20names_files/transliteration.js" type="text/javascript"></script>
<script type="text/javascript" src="Custom%20domain%20names_files/t13n.htm"></script>
<script type="text/javascript" src="Custom%20domain%20names_files/brand.htm"></script>


<!-- loopfuse -->
<script src="Custom%20domain%20names_files/listen.js" type="text/javascript"></script>
<script type="text/javascript">
_lf_cid = "LF_024e931f";
_lf_remora();
</script>

<!-- google analytics -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="Custom%20domain%20names_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
try{
var pageTracker = _gat._getTracker("UA-2989055-1");
pageTracker._setDomainName(".heroku.com");
pageTracker._trackPageview();
} catch(err) {}
</script>


</a></body><xdTrailArea></xdTrailArea></html>