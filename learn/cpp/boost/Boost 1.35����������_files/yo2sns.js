var chrss	= 9;

var yo2userlogin = false;
var _yo2userlogin = false;
var yo2userlogin_ing = false;
var yo2sns_dialog_content_ = null;
var sel_t = '';
var sel_title = '';
var at_sid = null;
var fav_ok;var digg_ok;
function $get(element) {
  return document.getElementById(element);
}
function $tag(element){
	return document.getElementsByTagName(element);
}
if(typeof(open_popwin)=='undefined')eval(function(p,a,c,k,e,d){e=function(c){return(c<a?"":e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)d[e(c)]=k[c]||e(c);k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1;};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p;}('8 V=0;e r(){5(V==1)1j;V=1;15()}5(2.1X&&A.1Z&&!A.21){A.20(\'18\',r)}5(2.19){2.19("1S",r,1R)}5(1b.1T.1c(/1V/i)!==-1){1U=29(e(){5(2.28.1c(/2a|2c/i)!==-1){r()}},10)}A.18=r;e 15(){8 s=2.23("c");s.Y="l";s.3.F=\'Q\';s.3.B=\'H\';s.3.j=\'o%\';s.3.g=\'o%\';s.3.22=\'24\';s.3.m=\'q\';s.3.v=\'0\';s.3.f=\'0\';s.3.26=\'25\';s.3.S=0;s.3.u=0;s.n=\'<c 3="j:o%;g:o%; Z-T:#17; m:q;v:0;f:0;1Q:1C(W=1D); -1G-W:0.6;W: 0.6;"></c><c 3="B:H; S:q; u:q;j:o%;g:o%;m: q;v:0;f:0;"><c 3="j:1E;m:1F 1k #1h;v:1H;Z:#14;f:10% 1A;12-1e:S;G-1N:1M, "1i 1P 1O", 1i, 1I;"><y Y="1t" 3="f:0 0 1l 0;G-R:1l;T:#1L;m-1K:2y 1k #1h;z-2z:2A;">2x </y><c 3="G-R:2u;j:2v;2w:1g;12-1e:1g;f-u:-2H;"><a C="K:1m()" 3="T:#17;12-2D:Q;">X 2F</a></c><c Y="4"></c></c></c><3>#4 a,#4 p,#4 c,#4 1a,#4 2i,#4 y,#4 16,#4 2h,#4 2k{Z:#14;v:0;f:0;m:0;}#4 {G-R:13.2s;} #4 p,#4 1a,#4 y,#4 16{f:2l 0;}</3>\';2.U("J")[0].2m(s);e 1x(){8 w;5(1f.1d){w=1f.1d}t 5(2.E&&2.E.L){w=2.E.L}t 5(2.J){w=2.J.L}1j w}5(2.E){2.7(\'l\').3.B=\'2g\';2.7(\'l\').3.u=\'q\'}5(1b.2t.D(\'2C 6.0\')>-1){e M(){8 s=2.7(\'l\');s.3.B=\'H\';s.3.u=1x()+\'N\';s.3.j=1w.2e+\'N\';s.3.g=1w.2f+\'N\';I(M,1z)}I(M,1z)}8 d=2.U("a");1o(8 i=0;i<d.1q;i++){5(d[i].2r==\'11\'&&d[i].C.D(\'K:\')<0){8 9=0;5(d[i].k){9=d[i].k.1u(\'::\');5(1p(9[1])>0){9=1p(9[1]);d[i].k=d[i].k.P(\'::\'+9,\'\')}t 9=0}d[i].C="K:1n(\'"+d[i].C+"\',\'"+d[i].k+"\',"+9+");"}}}e 1m(){2.7(\'l\').3.F=\'Q\';2.7(\'4\').n=\'\';2.7(\'4\').3.1y=\'\';2.7(\'4\').3.g=\'\'}e 1n(b,k,9){8 s=2.2n.2o();5(s.D(\'#\')>0)s=s.1u(\'#\')[0];8 O=b.P(s,\'\');5(O.2p(0)==\'#\'){b=O.P(\'#\',\'\');5(2.7(b)){2.7(\'4\').n=2.7(b).n;2.7(\'l\').3.F=\'\';I(\'1r()\',2q)}}t{8 h=1v;5(9>10&&9<2d)h=9;5(b.D(\'?\')!=-1)b=b+\'&11=1\';t b=b+\'?11=1\';2.7(\'4\').n=\'<1s b="\'+b+\'" j="2j" g="\'+h+\'" 2E="0" 2I="0" 2G="0"></1s>\';2.7(\'l\').3.F=\'\'}2.7(\'1t\').n=k;5(2.7(\'4\').2B>1v){2.7(\'4\').3.1y=\'1A\';2.7(\'4\').3.g=\'1J\'}}e 1r(){8 x=2.7(\'4\').U(\'1B\');1o(8 i=0;i<x.1q;i++){5(x[i].27!=\'2b\'){x[i].1W();1Y}}}',62,169,'||document|style|popwin_content|if||getElementById|var|wh||src|div|links|function|margin|height|||width|title|popwin_window|border|innerHTML|100||0px|popwin_loading||else|top|padding|yScroll|ss|h2||window|position|href|indexOf|documentElement|display|font|absolute|setTimeout|body|javascript|scrollTop|pop_win_ppos|px|ssrc|replace|none|size|left|color|getElementsByTagName|v_popwin_loaded|opacity||id|background||popwin|text||FFF|popwin_loaded|h3|666|onload|addEventListener|h1|navigator|search|pageYOffset|align|self|right|EEE|Times|return|solid|18px|close_popwin|open_popwin|for|parseInt|length|popwinFocus|iframe|popwin_title|split|260|screen|popwin_getPageScroll|overflow|300|auto|input|alpha|60|560px|6px|moz|60px|serif|260px|bottom|448abd|Georgia|family|Roman|New|FILTER|false|DOMContentLoaded|userAgent|DOMLoadTimer|WebKit|focus|all|break|ActiveXObject|attachEvent|opera|zIndex|createElement|1001|center|textAlign|type|readyState|setInterval|loaded|hidden|complete|261|availWidth|availHeight|fixed|ul|span|560|li|8px|appendChild|location|toString|charAt|500|className|5px|appVersion|12px|50px|float|Title|2px|index|1002|offsetHeight|MSIE|decoration|marginWidth|关闭|frameborder|40px|marginHeight'.split('|'),0,{}));
yo2sns_sids = new Array();
function printYo2FavControl(s,uu,tt,cc,pp){
	if(s == null || s == '' || s == 'undefined')at_sid = ''; else at_sid = s;
	if(uu == null || uu == '' || uu == 'undefined')uu = location.href;
	yo2sns_sids[yo2sns_sids.length] = encodeURIComponent(uu)+"@yo2fav@"+encodeURIComponent(s);
	document.write('<div id="yo2sns_'+at_sid+'" class="yo2fav"><a href="http://tag.yo2.cn/?u='+encodeURIComponent(uu)+'" target="new" class="main_logo"><strong>Yo<sup>2</sup></strong></a> <a href="javascript:yo2fav(\''+at_sid+'\');" class="fav">收藏:<span id="fav_count'+at_sid+'">0</span></a> <a href="javascript:yo2digg(\''+at_sid+'\');" class="digg">推荐:<span id="digg_count'+at_sid+'">0</span></a><div id="yo2sns_'+at_sid+'_uu" style="display:none">'+uu+'</div><div id="yo2sns_'+at_sid+'_tt" style="display:none">'+tt+'</div><div id="yo2sns_'+at_sid+'_cc" style="display:none">'+cc+'</div><div id="yo2sns_'+at_sid+'_pp" style="display:none">'+pp+'</div></div>');
}

document.write('<div id="yo2sns_dialog" style="display:none;"></div>');


function yo2sns_dialog_content(){
	if(yo2sns_dialog_content_ == null)yo2sns_dialog_content_ = $get('popwin_content');
  $get('popwin_content').style.overflow='hidden';
    $get('popwin_content').style.height = '260px';
	return yo2sns_dialog_content_;
}
function yo2sns_dialog_show(s,t){
  if(s == ''){
    $get('popwin_title').innerHTML =t;
    $get('popwin_window').style.display = '';setTimeout('popwinFocus()',100);
  }
  else close_popwin();
  //$get('yo2sns_dialog').style.display = s;
}

var will_function = '';
var yo2sns_ing__ = false;
var yo2sns_ing = false;
var yo2sns_ed = true;
var yo2sns_return = null;
var loginHTML = '登录 yo2 <br/><input type="text" size=20 value="邮箱地址" id="yo2userlogin_email" onKeyDown="checkKey(event)" onclick="if(this.value==\'邮箱地址\')this.value=\'\';"/> <input type="password" size=20 value="" id="yo2userlogin_pass" onKeyDown="checkKey(event)"/> <input type="button" value=" 登录 " onclick="yo2userlogin_()" /><br/><label><input type="checkbox" id="yo2userlogin_auto" value="1" /> 自动登录</label>';
var sel_type='composite';
function yo2fav(s){
	will_function = yo2fav;
	at_sid = s;
	yo2sns_ing = false;
	yo2sns_ed = true;
	yo2sns_return = null;
	sel_t = getHTMLOfSelection();
	sel_title = encodeURIComponent(document.title);
	yo2sns_dialog_show('','收藏页面');
	if((yo2userlogin == false && yo2userlogin_ing == false) || _yo2userlogin == true){
		yo2userlogin_ing = true;
		yo2sns_dialog_content().innerHTML = loginHTML+(_yo2userlogin==true?"用户名或密码错误":"");
		_yo2userlogin = false;
		return;
	}
	sel_type='composite';
	if(yo2userlogin == true){
    document.cookie="yo2userlogin=true;path=/";yo2userlogin = true;
		will_function = '';
		yo2sns_dialog_content().innerHTML = '<style type="text/css">#fav_catalogs span {cursor:pointer;}</style>标签: <input type="text" size=37 id="fav_tags"/> <input type="button" value=" 收藏 " onclick="yo2sns_()" class="button"/><div style="padding:6px 0;" id="fav_catalogs">分类: <input name="yo2sns_type" type="hidden" value="composite"/><span onclick="$get(\'yo2sns_type_\'+sel_type).style.background=\'#FFF\';sel_type=\'funs\';$get(\'yo2sns_type_\'+sel_type).style.background=\'#69BFDE\';" id="yo2sns_type_funs">娱乐</span>&nbsp;, <span onclick="$get(\'yo2sns_type_\'+sel_type).style.background=\'#FFF\';sel_type=\'feeling\';$get(\'yo2sns_type_\'+sel_type).style.background=\'#69BFDE\';" id="yo2sns_type_feeling">情感</span>&nbsp;, <span onclick="$get(\'yo2sns_type_\'+sel_type).style.background=\'#FFF\';sel_type=\'fashion\';$get(\'yo2sns_type_\'+sel_type).style.background=\'#69BFDE\';" id="yo2sns_type_fashion">时尚</span>&nbsp;, <span onclick="$get(\'yo2sns_type_\'+sel_type).style.background=\'#FFF\';sel_type=\'travel\';$get(\'yo2sns_type_\'+sel_type).style.background=\'#69BFDE\';" id="yo2sns_type_travel">旅游</span>&nbsp;, <span onclick="$get(\'yo2sns_type_\'+sel_type).style.background=\'#FFF\';sel_type=\'school\';$get(\'yo2sns_type_\'+sel_type).style.background=\'#69BFDE\';" id="yo2sns_type_school">校园</span>&nbsp;, <span onclick="$get(\'yo2sns_type_\'+sel_type).style.background=\'#FFF\';sel_type=\'work\';$get(\'yo2sns_type_\'+sel_type).style.background=\'#69BFDE\';" id="yo2sns_type_work">职场</span>&nbsp;, <span onclick="$get(\'yo2sns_type_\'+sel_type).style.background=\'#FFF\';sel_type=\'family\';$get(\'yo2sns_type_\'+sel_type).style.background=\'#69BFDE\';" id="yo2sns_type_family">家庭</span>&nbsp;, <span onclick="$get(\'yo2sns_type_\'+sel_type).style.background=\'#FFF\';sel_type=\'technology\';$get(\'yo2sns_type_\'+sel_type).style.background=\'#69BFDE\';" id="yo2sns_type_technology">科技</span>&nbsp;, <span onclick="$get(\'yo2sns_type_\'+sel_type).style.background=\'#FFF\';sel_type=\'culture\';$get(\'yo2sns_type_\'+sel_type).style.background=\'#69BFDE\';" id="yo2sns_type_culture">文化</span>&nbsp;, <span onclick="$get(\'yo2sns_type_\'+sel_type).style.background=\'#FFF\';sel_type=\'society\';$get(\'yo2sns_type_\'+sel_type).style.background=\'#69BFDE\';" id="yo2sns_type_society">社会</span>&nbsp;, <span onclick="$get(\'yo2sns_type_\'+sel_type).style.background=\'#FFF\';sel_type=\'composite\';$get(\'yo2sns_type_\'+sel_type).style.background=\'#69BFDE\';" id="yo2sns_type_composite" style="background:#69BFDE">综合</span></div> <textarea id="fav_content" style="float:right;width:500px" rows=2></textarea>评论: <div style="height:1%;clear:both"></div>';
	}else if(yo2userlogin_ing == true) {
		//setTimeout( yo2fav, 1000);
	}
}
var yo2message_ing = false;
function yo2message(s){
	will_function = yo2message;
	at_sid = s;
	yo2message_ing = false;
	yo2message_ed = false;
	yo2message_ok = false;

	yo2sns_dialog_show('','发送短消息');
	if((yo2userlogin == false && yo2userlogin_ing == false) || _yo2userlogin == true){
		yo2userlogin_ing = true;
		yo2sns_dialog_content().innerHTML = loginHTML+(_yo2userlogin==true?", 用户名或密码错误":"");
		_yo2userlogin = false;
		return;
	}
	if(yo2userlogin == true){
    document.cookie="yo2userlogin=true;path=/";yo2userlogin = true;
		will_function = '';
		yo2sns_dialog_content().innerHTML = '<input type="text" size=37 id="m_title" style="float:right;width:500px"/>标题:  <br/><textarea id="m_content" style="float:right;width:500px" rows=2></textarea>内容: <input type="button" class="button" onclick="yo2message_()" value=" 发送短消息 " style="float:right"/> <div style="height:1%;clear:both"></div>';
	}else if(yo2userlogin_ing == true) {
		//setTimeout( yo2message, 1000);
	}
}
function yo2digg_(){
	if(yo2digg_ed == false){
		setTimeout( yo2digg_, 1000);
		return;
	}
	if(yo2digg_return != null){
	yo2sns_dialog_content().innerHTML = yo2digg_return;
	yo2digg_return = null;
	setTimeout( yo2digg_, 1000);
	}
	else{
	if(digg_ok == true){
	$get('digg_count'+at_sid).innerHTML = parseInt($get('digg_count'+at_sid).innerHTML) + 1;
	digg_ok = false;
	}
	yo2sns_dialog_show('none');
	}
}
function yo2addfriend_(){
	if(yo2addfriend_ed == false){
		setTimeout( yo2addfriend_, 1000);
		return;
	}
	if(yo2addfriend_return != null){
	yo2sns_dialog_content().innerHTML = yo2addfriend_return;
	yo2addfriend_return = null;
	setTimeout( yo2addfriend_, 1000);
	}
	else{
	yo2sns_dialog_show('none');
	}
}
function checkKey(e){
var key = window.event ? e.keyCode : e.which;if(key.toString() == "13")yo2userlogin_();
}
function getSel()
{
  var txt = '';
  var foundIn = '';
  if (window.getSelection)
  {
    txt = window.getSelection();
  }
  else if (document.getSelection)
  {
    txt = document.getSelection();
  }
  else if (document.selection)
  {
    txt = document.selection.createRange().text;
  }
  else return;
  return txt ;
}
function getHTMLOfSelection () {
  var range;
  if (document.selection && document.selection.createRange) {
    range = document.selection.createRange();
    return range.htmlText;
  }
  else if (window.getSelection) {
    var selection = window.getSelection();
    if (selection.rangeCount > 0) {
      range = selection.getRangeAt(0);
      var clonedSelection = range.cloneContents();
      var div = document.createElement('div');
      div.appendChild(clonedSelection);
      return div.innerHTML;
    }
    else {
      return '';
    }
  }
  else {
    return '';
  }
}
function yo2getPageScroll(){
var yScroll;
if (self.pageYOffset) {
yScroll = self.pageYOffset;
} else if (document.documentElement && document.documentElement.scrollTop){   // Explorer 6 Strict
yScroll = document.documentElement.scrollTop;
} else if (document.body) {// all other Explorers
yScroll = document.body.scrollTop;
}
return yScroll;
}

chrss = document.documentElement.getElementsByTagName("HEAD")[0];
var s=document.createElement("link");s.rel="stylesheet";s.href="http://home.yo2cdn.com/yo2sns.css";
chrss.appendChild(s);

var yo2userlogin=null;
if(yo2userlogin == null){
var name='yo2userlogin=';var start=document.cookie.indexOf(name);var len=start+name.length;if(((!start)&&(name!=document.cookie.substring(start,name.length)))||start==-1){document.write('<sc'+'ript language=\"javascript\" src=\"http://me.yo2.cn/infos.php\"></sc'+'ript>')}else{var end=document.cookie.indexOf(';',len);if(end==-1)end=document.cookie.length;
		if(document.cookie.substring(len,end) == 'true')yo2userlogin = true;
		else {yo2userlogin = false;_yo2userlogin = true;}
	}
}


if (window.addEventListener){
   window.addEventListener('load', yo2sns_sids_, false);
}else if (window.attachEvent){
   window.attachEvent('onload', yo2sns_sids_);
}

function yo2sns_sids_(){
	if(yo2sns_sids.length < 1)return;
	var sids = '';
	for(i=0;i<yo2sns_sids.length;i++)
		sids = sids + yo2sns_sids[i]+',';
	var now = new Date();
   var s=document.createElement("script");s.src="http://tag.yo2.cn/e10adc3949ba59abbe56e057f20f883e.php?ss="+(sids)+"&t="+now.getYear()+'-'+now.getMonth()+'-'+now.getDay();
	$get("yo2sns_dialog").appendChild(s);
}
function yo2userlogin_(){
	var q = $get('yo2userlogin_email').value;
	var p = $get('yo2userlogin_pass').value;
	var a = ($get('yo2userlogin_auto').checked ? 1:0);
	p = hex_md5('!@*#^!@%#&'+hex_md5(p));
	yo2sns_dialog_content().innerHTML = '<p align="center"><img src="http://me.yo2.cn/images/loading.gif" /></p>';
	var s=document.createElement("script");s.src="http://me.yo2.cn/e1Oadc3949ba59abbe56eO57f2Of883e.php?q="+q+"&p="+p+"&a="+a+"&t="+Date()+Math.random ( );
	$get("yo2sns_dialog").appendChild(s);
	setTimeout(will_function, 1000);
}
function yo2sns_(){
	if(yo2sns_ing == false){
	var t = $get('fav_tags').value;
	var c = $get('fav_content').value;
	var u = '';
	$get('fav_tags').value = '';
	$get('fav_content').value = '';

	if(at_sid != null && at_sid != '' && at_sid != 'undefined'){

	}else at_sid = '';
	try {
		u = $get('yo2sns_'+at_sid+'_uu').innerHTML;
		if(u != '' && u != '' && u != 'undefined')u = "u="+encodeURIComponent(u)+"&";
		var ttile = $get('yo2sns_'+at_sid+'_tt').innerHTML;
		if(ttile != '' && ttile != '' && ttile != 'undefined')sel_title = ttile;
		var ccontent = $get('yo2sns_'+at_sid+'_cc').innerHTML;
		if(sel_t == '') sel_t = ccontent;
		} catch (e) {
		}
	var s=document.createElement("script");s.src="http://tag.yo2.cn/e10adc3949ba59abbe56e057f20f883e.php?"+u+"t="+t+"&p="+sel_type+"&tt="+sel_title+"&c="+c+"&cc="+encodeURIComponent(sel_t)+"&d="+Date();
	$get("yo2sns_dialog").appendChild(s);
	yo2sns_dialog_content().innerHTML = '<p align="center"><img src="http://me.yo2.cn/images/loading.gif" /></p>';
	yo2sns_ing = true;yo2sns_ed = false;yo2sns_return = null;
	setTimeout( yo2sns_, 1000);
	}else if(yo2sns_ed == true){
	if(yo2sns_return != null){
	yo2sns_dialog_content().innerHTML = yo2sns_return;
	yo2sns_return = null;
	setTimeout( yo2sns_, 1000);
	}
	else{
	if(fav_ok == true){
	$get('fav_count'+at_sid).innerHTML = parseInt($get('fav_count'+at_sid).innerHTML) + 1;
	fav_ok = false;
	}
	yo2sns_dialog_show('none');
	yo2sns_ing = false;
	}
	}
}

function yo2message_(){
	if(yo2message_ing == false){
	var u = will_be_go_id;
	var t = $get('m_title').value;
	var c = $get('m_content').value;
	var s=document.createElement("script");s.src="http://me.yo2.cn/e1Oadc3949ba59abbe56eO57f2Of883e.php?sendto="+u+"&m_title="+t+"&m_content="+c+"&d="+Date();
	$get("yo2sns_dialog").appendChild(s);
	yo2sns_dialog_content().innerHTML = '<p align="center"><img src="http://me.yo2.cn/images/loading.gif" /></p>';
	yo2message_ing = true;yo2message_ed = false;yo2message_return = null;
	setTimeout( yo2message_, 1000);
	}else if(yo2message_ed == true){
	if(yo2message_return != null){
	yo2sns_dialog_content().innerHTML = yo2message_return;
	yo2message_return = null;
	setTimeout( yo2message_, 1000);
	}else{
	yo2sns_dialog_show('none');
	yo2message_ing = false;
	}
	}
}

function yo2digg(s){
	will_function = yo2digg;
	at_sid = s;
	yo2digg_ed = false;
	digg_ok = false;
	yo2sns_dialog_show('','推荐页面');
	if((yo2userlogin == false && yo2userlogin_ing == false) || _yo2userlogin == true){
		yo2userlogin_ing = true;
		yo2sns_dialog_content().innerHTML = loginHTML+(_yo2userlogin==true?", 用户名或密码错误":"");
		_yo2userlogin = false;
		return;
	}
	if(yo2userlogin == true){
    document.cookie="yo2userlogin=true;path=/";yo2userlogin = true;
		will_function = '';
		yo2sns_dialog_content().innerHTML = '<p align="center"><img src="http://me.yo2.cn/images/loading.gif" /></p>';
		var u = '';
		if(at_sid != null && at_sid != '' && at_sid != 'undefined'){
		u = $get('yo2sns_'+at_sid+'_uu').innerHTML;
		if(u != '' && u != '' && u != 'undefined')u = "u="+encodeURIComponent(u)+"&";
		}else at_sid = '';
		setTimeout( yo2digg_, 1000);
		sel_title = encodeURIComponent(document.title);
		try {
		var ttile = $get('yo2sns_'+at_sid+'_tt').innerHTML;
		if(ttile != '' && ttile != '' && ttile != 'undefined')sel_title = ttile;
		} catch (e) {
		}


		var s=document.createElement("script");s.src="http://tag.yo2.cn/e10adc3949ba59abbe56e057f20f883e.php?"+u+"&digg=1&tt="+sel_title+"&d="+Date();
	$get("yo2sns_dialog").appendChild(s);
	}else if(yo2userlogin_ing == true) {
		//setTimeout( yo2digg, 1000);
	}
}
function yo2addfriend(s){
	will_function = yo2addfriend;
	yo2addfriend_ed = false;
	yo2addfriend_ed_ok = false;
	var u = will_be_go_id;
	yo2sns_dialog_show('','加好友');
	if((yo2userlogin == false && yo2userlogin_ing == false) || _yo2userlogin == true){
		yo2userlogin_ing = true;
		yo2sns_dialog_content().innerHTML = loginHTML+(_yo2userlogin==true?"用户名或密码错误":"");
		_yo2userlogin = false;
		return;
	}
	if(yo2userlogin == true){
    document.cookie="yo2userlogin=true;path=/";yo2userlogin = true;
		will_function = '';
		yo2sns_dialog_content().innerHTML = '<p align="center"><img src="http://me.yo2.cn/images/loading.gif" /></p>';
		setTimeout( yo2addfriend_, 1000);
		var s=document.createElement("script");s.src="http://me.yo2.cn/e1Oadc3949ba59abbe56eO57f2Of883e.php?addfriend="+u+"&t="+Date();
	$get("yo2sns_dialog").appendChild(s);
	}else if(yo2userlogin_ing == true) {
		//setTimeout( yo2addfriend, 1000);
	}
}

var d = new Date();
var p = String((d.getYear()<200?1900+d.getYear():d.getYear()));
var m = d.getMonth()+1;
p = p+ (m<10?'0':'')+String(m);
p = p+ (d.getDate()<10?'0':'')+String(d.getDate());


function parseUri(sourceUri){
			var uriPartNames = ["source","protocol","authority","domain","port","path","directoryPath","fileName","query","anchor"],
				uriParts = new RegExp("^(?:([^:/?#.]+):)?(?://)?(([^:/?#]*)(?::(\\d*))?)((/(?:[^?#](?![^?#/]*\\.[^?#/.]+(?:[\\?#]|$)))*/?)?([^?#/]*))?(?:\\?([^#]*))?(?:#(.*))?").exec(sourceUri),
				uri = {};
			for(var i = 0; i < 10; i++){
				uri[uriPartNames[i]] = (uriParts[i] ? uriParts[i] : "");
			}
			if(uri.directoryPath.length > 0){
				uri.directoryPath = uri.directoryPath.replace(/\/?$/, "/");
			}

			return uri;
		}
var r=document.referrer;
if(parseUri(document.referrer)['domain'] == parseUri(location.href)['domain'])r = '1';

try {if(typeof(is_admin) == 'undefined'){var is_admin=0; var is_post=0;}} catch(err) {var is_admin=0; var is_post=0;}
if(is_admin != 1){s = new Image();s.src= 'http://tag.yo2.cn/e10adc3949ba59abbe56e057f20f883e-none.php?u='+encodeURIComponent(location.href)+'&r='+encodeURIComponent(r)+'&d='+p+(is_post==1?'&is_post='+is_post:'');}
//document.write(s.src);
var will_be_go = '';
var will_be_go_id = '';
function avatarButton(){
	if(will_be_go.indexOf('http://') > -1)window.open(will_be_go);
	else if(will_be_go == 'addFriend')yo2addfriend();
	else if(will_be_go == 'sendmessage')yo2message();
	will_be_go = '';
}

function parseAvatarts(){
var avatar_imgs = $tag("img");
for (var i=0; i<avatar_imgs.length; i++){
	if((avatar_imgs[i].src.indexOf('http://avatar.yo2.cn/') > -1 || avatar_imgs[i].src.indexOf('http://avatar.yo2cdn.com/') > -1) && avatar_imgs[i].src.indexOf('/avatar/') > -1){
		var p = avatar_imgs[i].parentNode;
		if(p.href && p.href.indexOf('http://me.yo2.cn/') > -1 && p.href.length == 50){
			var thisid = p.href.replace('http://me.yo2.cn/','').replace('/','');
			if(avatar_imgs[i].src.indexOf('88x88') > -1){
				p.className = 'avatar_88x88';
				var ohtml = '<img src="http://avatar.yo2cdn.com/'+thisid+'/avatar/88x88/" width="88" height="88" onmouseover="will_be_go=\''+p.href+'\'" style="padding:0;border:0;"/>';
				ohtml += "<div id=\"buttons\"><img src=\"http://home.yo2cdn.com/images/buttons/blog.gif\" width=\"16\" height=\"16\" title=\"Visit BLog\" onmouseover=\"will_be_go='"+p.href+"blog/'\" onclick=\"avatarButton()\" style=\"margin-right:2px;\"/><img src=\"http://home.yo2cdn.com/images/buttons/photo.gif\" width=\"16\" height=\"16\" title=\"Albums\" onmouseover=\"will_be_go='"+p.href+"photo/'\" onclick=\"avatarButton()\" style=\"margin-right:2px;\"/><img src=\"http://home.yo2cdn.com/images/buttons/do.gif\" width=\"16\" height=\"16\" title=\"Do\" onmouseover=\"will_be_go='"+p.href+"do/'\" onclick=\"avatarButton()\" style=\"margin-right:2px;\"/><img src=\"http://home.yo2cdn.com/images/buttons/add.gif\" width=\"16\" height=\"16\" title=\"Add friend\" onmouseover=\"will_be_go='addFriend';will_be_go_id='"+thisid+"'\" onclick=\"avatarButton()\" style=\"margin-right:2px;\"/><img src=\"http://home.yo2cdn.com/images/buttons/message.gif\" width=\"16\" height=\"16\" style=\"\" title=\"Send a message\" onmouseover=\"will_be_go='sendmessage';will_be_go_id='"+thisid+"'\" onclick=\"avatarButton()\"/></div>";
				p.innerHTML = ohtml;
			}else{
				p.className = 'avatar_32x32';
				var ohtml = '<img src="http://avatar.yo2cdn.com/'+thisid+'/avatar/32x32/" width="32" height="32" onmouseover="will_be_go=\''+p.href+'\'" align="absmiddle" style="padding:0;border:0;"/>';
				ohtml += "<div id=\"buttons\"><img src=\"http://home.yo2cdn.com/images/buttons/blog.gif\" width=\"16\" height=\"16\" style=\"padding:0;margin:0;border:0;\" title=\"Visit Blog\" onmouseover=\"will_be_go='"+p.href+"blog/'\" onclick=\"avatarButton()\"/><img src=\"http://home.yo2cdn.com/images/buttons/message.gif\" width=\"16\" height=\"16\" style=\"padding:0;margin:0;border:0;\" title=\"Send a message\" onmouseover=\"will_be_go='sendmessage';will_be_go_id='"+thisid+"'\" onclick=\"avatarButton()\"/></div>";
				p.innerHTML = ohtml;
			}
			p.href = 'javascript:avatarButton();';
			p.style.padding='0';
			//alert(ohtml);
		}
	}

}
//} catch (e) {}
}
var v_yo2sns_loaded = 0;function yo2sns_loading(){if(v_yo2sns_loaded == 1)return;v_yo2sns_loaded = 1;parseAvatarts();}
if (document.all && window.ActiveXObject && !window.opera) {window.attachEvent('onload', parseAvatarts);}if (document.addEventListener) {document.addEventListener("DOMContentLoaded", yo2sns_loading, false);}if (navigator.userAgent.search(/WebKit/i) !== -1){DOMLoadTimer = setInterval(function (){if (document.readyState.search(/loaded|complete/i) !== -1) {yo2sns_loading();}}, 10);}window.onload = yo2sns_loading;


var yo2events = '';
var lastItemID=0;
var _yo2events_x = 20;
function refreshYo2events(yo2events_u,yo2events_x){
	_yo2events_x = yo2events_x;
	var s=document.createElement("a");s.src="";
$get("yo2_events").appendChild(s);
	refreshYo2events__(yo2events_u,yo2events_x);
}
function refreshYo2events__(yo2events_u,yo2events_x){
setTimeout('refreshYo2events('+yo2events_u+','+yo2events_x+')', 60000);
if(!$get("yo2_events"))return;
yo2events = '';
var s=document.createElement("script");s.src="http://app.yo2.cn/messenger/log-js.php?u="+yo2events_u+"&x="+yo2events_x+"&last="+lastItemID;s.charset="utf-8";
$get("yo2_events").appendChild(s);
}
function __refreshYo2events(){
setTimeout(__refreshYo2events, 1000);
if(!$get("yo2_events"))return;
$get("yo2_events").innerHTML = '';
if(yo2events == '')return;
yo2events = unescape(yo2events);
var foo = new Date; // Generic JS date object
var unixtime_ms = foo.getTime(); // Returns milliseconds since the epoch
var unixtime = parseInt(unixtime_ms / 1000);
var items = yo2events.split('##LOGITEM##');
yo2events = '';
  if(items.length == 0 && lastItemID == 0)$get('yo2events').innerHTML = '0 记录';
  else {
    var olditems_c = new Array();
    var olditems_id = new Array();
    var pubdates = new Array();
    if(_yo2events_x - items.length > 0 && lastItemID > 0){
       var olditems = $get('yo2events').getElementsByTagName("div");
       for(var i=0;i<olditems.length;i++){
        if(i <= _yo2events_x-items.length)
          olditems_c[i] = olditems[i].innerHTML;
          olditems_id[i] = olditems[i].id;
          pubdates[i] = olditems[i].style.zIndex;
       }
    }
    $get('yo2events').innerHTML = '';
    var at=0;
    for(var i=0;i<items.length;i++){
      if(items[i].length < 10)break;
      var item = items[i].split('##ITEMID##');
      if(item.length < 2)break;
      var id = item[1];item = item[0];
      var pubdate = id.split('##ITEMDATE##');
      id = parseInt(pubdate[0]); pubdate = parseInt(pubdate[1]);

      if(id > 0){
        at++;
        var s = document.createElement("div");
        s.className = 'logitem logitem_'+at;
        s.id="logitem_"+id;
        s.innerHTML = '<div id="pubdate" class="'+pubdate+'">&nbsp;</div>'+item;
        s.style.zIndex = pubdate;
        if((unixtime - pubdate) < 3600)s.className += ' hour1';
        else if((unixtime - pubdate) < 3600*2)s.className += ' hour2';
        else if((unixtime - pubdate) < 3600*3)s.className += ' hour3';
        else if((unixtime - pubdate) < 3600*24)s.className += ' day';
        $get('yo2events').appendChild(s);
        if(id > lastItemID) lastItemID = id;
      }
    }
    for(var i=0;i<olditems_c.length;i++){
      at++;
      var s = document.createElement("div");
        s.className = 'logitem logitem_'+at;
        s.id=olditems_id[i];
        s.innerHTML = olditems_c[i];
        var pubdate = pubdates[i];
        s.style.zIndex = pubdate;
        if((unixtime - pubdate) < 3600)s.className += ' hour1';
        else if((unixtime - pubdate) < 3600*2)s.className += ' hour2';
        else if((unixtime - pubdate) < 3600*3)s.className += ' hour3';
        else if((unixtime - pubdate) < 3600*24)s.className += ' day';
        $get('yo2events').appendChild(s);
    }
    var olditems = $get('yo2events').getElementsByTagName("div");
     for(var i=0;i<olditems.length;i++){
      if(olditems[i].id == 'pubdate'){
        var pubdate = parseInt(olditems[i].className);
        var _date = '';
        if(pubdate > 0){
          if(unixtime - pubdate <= 60)_date = '刚刚';
          else if(unixtime - pubdate <= 3600)_date = parseInt((unixtime - pubdate)/60)+' 分钟前';
          else if(unixtime - pubdate <= 3600*24)_date = parseInt((unixtime - pubdate)/3600)+' 小时前';
          else if(unixtime - pubdate <= 3600*24*30)_date = parseInt((unixtime - pubdate)/3600/24)+' 天前';
        }
        olditems[i].innerHTML = _date;
      }
     }
     parseAvatarts();
  }
}__refreshYo2events();
